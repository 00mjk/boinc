<html>
<head>
<title></title>
<script src="progressbar.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="progressbar.css" />
</head>
<body style="background-color:Black">

<div align="center" id="content" style="position:absolute;">
    <table cellspacing="5px">
        <tr>
            <td>
                <img src="boinc.png"><br />
                <img src="virtualbox.png">
            </td>
            <td valign="top" style="width:250px;height:128px">
                <div id="username_container" style="color:White"></div>
                <div id="teamname_container" style="color:White"></div>
                <div id="workunitname_container" style="color:White"></div>
                <div id="progressbar_container" style="color:White"></div>
                <div id="message_container" style="color:White">Graphics Initializing...</div>
            </td>
        </tr>
    </table>
</div>

<script language="JavaScript" type="text/javascript">
    var interval;
    var step = 5;
    var delay = 1000;
    var height = 0;
    var Hoffset = 0;
    var Woffset = 0;
    var yon = 0;
    var xon = 0;
    var xPos = 0;
    var yPos = 0;
    var s_username = "";
    var s_teamname = "";
    var s_workunitname = "";
    var s_message = "";

    var ProgressBarConfig = {
        borderWidth: 0,
        borderRadius: 20,
        height: 20,
        width: 245,
        imageUrl: 'h_fg8.png',
        backgroundUrl: 'h_bg2.png',
        creationType: ProgressBar.CreationType.AppendChild
    };

    //var FractionDoneProgressBar = new ProgressBar("progressbar_container", ProgressBarConfig);

    function refresh() {
        if (window.external.IsAppInitDataUpdated()) {
            window.external.SetAppInitDataUpdate(false);
            s_username = window.external.UserName;
            s_teamname = window.external.TeamName;
            s_workunitname = window.external.WorkunitName;
        }

        //FractionDoneProgressBar.setValue(parseInt(window.external.FractionDone * 100, 10));

        if (s_username.length > 0) {
            username_container.style.visibility = "visible";
            username_container.innerHTML = s_username;
        } else {
            username_container.style.visibility = "hidden";
        }

        if (s_teamname.length > 0) {
            teamname_container.innerHTML = "Team: " + s_teamname;
        }

        if (s_workunitname.length > 0) {
            workunitname_container.innerHTML = "Workunit: " + s_workunitname;
        }

        if (username_container.style.visibility == "hidden") {
            teamname_container.style.visibility = "hidden";
            workunitname_container.style.visibility = "hidden";
            progressbar_container.style.visibility = "hidden";
            message_container.style.visibility = "visible";
        } else {
            teamname_container.style.visibility = "visible";
            workunitname_container.style.visibility = "visible";
            progressbar_container.style.visibility = "visible";
            if (s_message.length > 0) {
                message_container.innerHTML = s_message;
                message_container.style.visibility = "visible";
            } else {
                message_container.innerHTML = "";
                message_container.style.visibility = "hidden";
            }
        }

        update_positions();
    }

    function update_positions() {
        width = document.body.clientWidth;
        height = document.body.clientHeight;
        Hoffset = content.offsetHeight;
        Woffset = content.offsetWidth;
        content.style.left = xPos + document.body.scrollLeft;
        content.style.top = yPos + document.body.scrollTop;

        if (yon) {
            yPos = yPos + step;
        }
        else {
            yPos = yPos - step;
        }
        if (yPos < 0) {
            yon = 1;
            yPos = 0;
        }
        if (yPos >= (height - Hoffset)) {
            yon = 0;
            yPos = (height - Hoffset);
        }
        if (xon) {
            xPos = xPos + step;
        }
        else {
            xPos = xPos - step;
        }
        if (xPos < 0) {
            xon = 1;
            xPos = 0;
        }
        if (xPos >= (width - Woffset)) {
            xon = 0;
            xPos = (width - Woffset);
        }
    }

    interval = setInterval('refresh()', delay);
</script>
</body>
</html>